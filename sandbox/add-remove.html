<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width" />

  <title>add/remove cells</title>

  <link rel="stylesheet" href="../css/flickity.css" />
  <link rel="stylesheet" href="sandbox.css" />

  <style>
    .remove-button {
      font-size: 20px;
      position: absolute;
      right: 10px;
      top: 10px;
    }
  </style>

</head>
<body>

  <h1>add/remove cells</h1>

  <div id="demo1">
    <div class="container variable-width counting">
      <div class="cell n1 w3"><button class="remove-button">&times;</button></div>
      <div class="cell n2"><button class="remove-button">&times;</button></div>
      <div class="cell n3 w3"><button class="remove-button">&times;</button></div>
      <div class="cell n4"><button class="remove-button">&times;</button></div>
      <div class="cell n5 w2"><button class="remove-button">&times;</button></div>
      <div class="cell n6 w2"><button class="remove-button">&times;</button></div>
    </div>
    <p>
      
    </p>
  </div>

<script src="../bower_components/get-style-property/get-style-property.js"></script>
<script src="../bower_components/get-size/get-size.js"></script>
<script src="../bower_components/matches-selector/matches-selector.js"></script>
<script src="../bower_components/eventEmitter/EventEmitter.js"></script>
<script src="../bower_components/eventie/eventie.js"></script>
<script src="../bower_components/doc-ready/doc-ready.js"></script>

<script src="../js/utils.js"></script>
<script src="../js/unipointer.js"></script>
<script src="../js/cell.js"></script>
<script src="../js/prev-next-button.js"></script>
<script src="../js/page-dots.js"></script>
<script src="../js/player.js"></script>
<script src="../js/drag.js"></script>
<script src="../js/animate.js"></script>
<script src="../js/flickity.js"></script>

<script>

function randInt( num ) {
  return Math.floor( Math.random() * num );
}

function getRandom( ary ) {
  var index = Math.floor( Math.random() * num );
}

var widthClasses = [ '', 'w2', 'w3' ];
var nClasses = 'n1 n2 n3 n4 n5 n6'.split(' ');

function makeCell() {
  var cell = document.createElement('div');
  var className = 'cell ' + getRandom( widthClasses ) + ' ' + getRandom( nClasses );
  var removeButton = document.createElement('button');
  removeButton.className = 'remove-button';
  utils.setText( removeButton , 'X' );
  cell.appendChild( removeButton );
  return cell;
}

function getParent( elem, selector ) {
  while ( elem != document.body ) {
    elem = elem.parentNode;
    if ( matchesSelector( elem, selector ) ) {
      return elem;
    }
  }
}

window.onload = function() {

  var flkty1 = window.flkty1 = new Flickity( '#demo1 .container' );

  eventie.bind( document.querySelector('#demo1 .container'), 'click', function( event ) {
    if ( event.target.className != 'remove-button' ) {
      return;
    }

    //
    var cellElement = getParent( event.target, '.cell' );
    var container = getParent( event.target, '.container' );
    var flkty = Flickity.data( container );
    flkty.remove( cellElement );
  });

};


</script>

</body>
</html>
